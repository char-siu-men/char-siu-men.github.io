"use strict";var grecaptchaModel={corrected:!1,init:function(){if(grecaptchaModel.corrected=!1,"undefined"!=typeof grecaptcha){var e=grecaptcha.getResponse();grecaptchaModel.corrected=e.length>0}},correctCallback:function(){grecaptchaModel.corrected=!0,grecaptchaModel.onCorrectCaptcha()},onCorrectCaptcha:function(){}},reCaptchaCorrectCallback=function(){grecaptchaModel.correctCallback()},FormContainer=function(e,t,n,a){this.id=e,this.url=t,this.initFunc=n,this.title=a};$(function(){function e(){if(location.hash.length>0)return void(location.href=f);if(d){var e={callbacks:{signInSuccess:function(e,t,n){return handleSignedInUser(e),!1}},signInSuccessUrl:f,signInFlow:"popup",signInOptions:[{provider:firebase.auth.GoogleAuthProvider.PROVIDER_ID,scopes:["https://www.googleapis.com/auth/plus.login"]},{provider:firebase.auth.FacebookAuthProvider.PROVIDER_ID,scopes:["public_profile","email","user_friends"]},firebase.auth.TwitterAuthProvider.PROVIDER_ID,firebase.auth.GithubAuthProvider.PROVIDER_ID,firebase.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:f},a=new firebaseui.auth.AuthUI(firebase.auth());a.start("#firebaseui-auth-container",e)}p.on("click",r),$(window).on("popstate",i),t(),n()}function t(){var e=$(".input_container form");$.extend($.validator.messages,{required:"必須項目です",email:"正しいメールアドレスを入力してください"}),e.validate({rules:{type:{required:!0},name:{required:!0},kana:{required:!0},tel:{required:!0},email:{required:!0,email:!0},content:{required:!0},agree:{required:!0},domain:{required:!0,mysite:!0}},messages:{agree:{required:"ご同意お願いします"}},errorPlacement:function(e,t){"type"===t.attr("name")?e.insertAfter($(t).closest("div")):"agree"===t.attr("name")?e.insertAfter($(t).closest("label")):e.insertAfter(t)},onsubmit:!0,submitHandler:a})}function n(){grecaptchaModel.init(),p.prop("disabled",!grecaptchaModel.corrected)}function a(){return h={type:$('input[name="type"]:checked').val(),company:$("#company").length>0?$("#company").val():"",name:$("#name").val(),kana:$("#kana").val(),tel:$("#tel").val(),email:$("#email").val(),content:$("#content").val(),domain:document.domain,referrer:document.referrer},/\.altus5\./.test(document.domain)?($("#confirm_type").text(h.type),$("#confirm_company").text(h.company),$("#confirm_name").text(h.name),$("#confirm_kana").text(h.kana),$("#confirm_tel").text(h.tel),$("#confirm_email").text(h.email),$("#confirm_content").html(s(h.content)),o("confirm"),c(".confirm_container"),l(".confirm_container"),void $("body,html").animate({scrollTop:0},0)):void console.log("altus5以外のドメインでは使わないでください")}function r(){if(!grecaptchaModel.corrected)return!1;var e=h.email.replace(/[.]/g,"_"),t=moment(),n=t.format("YYYY-MM-DD-HH-mm-ss"),a=firebase.database(),r=a.ref("/contact/"+e+"/"+n);try{r.set(h)}catch(i){throw console.log(i),i}return o("thanks"),c(".thanks_container"),l(".thanks_container"),$("body,html").animate({scrollTop:0},0),!1}function i(e){var t=location.hash,n="";$.each(m,function(e,a){if(a.url===t)return n=a.id,!1});var a=u(n);l(a.id)}function o(e){var t=$('input[name="type"]:checked').val();ga("send","event","Contact",e,t)}function c(e){var t=u(e);history.pushState(!0,t.title,f+t.url)}function l(e){""===e&&(e=".input_container");var t=u(e);$.each(m,function(e,n){n.id===t.id?$(n.id).show():$(n.id).hide()}),null!==t.initFunc&&t.initFunc()}function u(e){var t=null;return $.each(m,function(n,a){if(a.id===e)return t=a,!1}),null===t&&(t=m[0]),t}function s(e){var t=$("<p></p>");t.text(e);var n=t.html();return n.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />")}var d=!1,f=location.href.replace(/#.*/,""),p=$(".confirm_container form button"),m=[new FormContainer(".input_container","#input",t,"お問い合わせ"),new FormContainer(".confirm_container","#confirm",n,"お問い合わせ内容確認"),new FormContainer(".thanks_container","#thanks",null,"お問い合わせ承りました")],h={},g={apiKey:"AIzaSyDSf5IQpGTOY4ploswbC_hiRu3Ui5Oy0Z4",authDomain:"altus-five-contact-fa5bc.firebaseapp.com",databaseURL:"https://altus-five-contact-fa5bc.firebaseio.com",storageBucket:"altus-five-contact-fa5bc.appspot.com",messagingSenderId:"923242406897"};firebase.initializeApp(g),grecaptchaModel.onCorrectCaptcha=function(){p.prop("disabled",!grecaptchaModel.corrected)},e()});
//# sourceMappingURL=a5contact.js.map
